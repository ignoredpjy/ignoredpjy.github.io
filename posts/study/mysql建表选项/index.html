<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>PJY's Blog</title><meta name=keywords content><meta name=description content="全文摘抄自：https://huweicai.com/mysql-create-options/
这是一个很常见的 SQL 建表语句：
1 2 3 4 5 CREATE TABLE `people` ( `id` int NOT NULL AUTO_INCREMENT, `name` varchar(40) DEFAULT NULL, PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 SQL 建表语句结构如下：
1 2 3 CREATE [TEMPORARY] TABLE [IF NOT EXISTS] tbl_name (create_definition,...) [table_options] 我们对照结构可以看到我们的建表语句最后一部分是表选项，而在这里我们指定了两个选项：引擎和字符集，那么总共都有哪些选项可以设置呢？参照MySQL官方文档，我们一起来看看。
AUTO_INCREMENT MySQL 一张表中可以指定一个字段为 auto increment，这样在当这个字段没有指定值时就在当前表最大值的基础上自增，在插入了自增的一列后，可以通过：
1 select LAST_INSERT_ID(); 来获取 MySQL 自动生成的 ID。
在建表的时候，可以通过 AUTO_INCREMENT 指定自增开始的值：
1 2 3 4 create table if not exists peoples ( id int primary key auto_increment, name varchar(40) null ) AUTO_INCREMENT = 13; AVG_ROW_LENGTH CHARACTER SET 可以指定这个表使用的默认字符集（因为也可以针对列单独设置字符集），如果表不指定或者设置成 default 的话则会使用库的默认字符集，如果数据库的也没有设置的，MySQL Server 的默认字符集是 utf8mb4。"><meta name=author content="PJY"><link rel=canonical href=https://ignoredpjy.github.io/posts/study/mysql%E5%BB%BA%E8%A1%A8%E9%80%89%E9%A1%B9/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://ignoredpjy.github.io/img/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://ignoredpjy.github.io/img/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://ignoredpjy.github.io/img/favicon-32x32.png><link rel=apple-touch-icon href=https://ignoredpjy.github.io/apple-touch-icon.png><link rel=mask-icon href=https://ignoredpjy.github.io/android-chrome-512x512.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css><script src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script>
<script src=https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.min.js></script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content><meta property="og:description" content="全文摘抄自：https://huweicai.com/mysql-create-options/
这是一个很常见的 SQL 建表语句：
1 2 3 4 5 CREATE TABLE `people` ( `id` int NOT NULL AUTO_INCREMENT, `name` varchar(40) DEFAULT NULL, PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 SQL 建表语句结构如下：
1 2 3 CREATE [TEMPORARY] TABLE [IF NOT EXISTS] tbl_name (create_definition,...) [table_options] 我们对照结构可以看到我们的建表语句最后一部分是表选项，而在这里我们指定了两个选项：引擎和字符集，那么总共都有哪些选项可以设置呢？参照MySQL官方文档，我们一起来看看。
AUTO_INCREMENT MySQL 一张表中可以指定一个字段为 auto increment，这样在当这个字段没有指定值时就在当前表最大值的基础上自增，在插入了自增的一列后，可以通过：
1 select LAST_INSERT_ID(); 来获取 MySQL 自动生成的 ID。
在建表的时候，可以通过 AUTO_INCREMENT 指定自增开始的值：
1 2 3 4 create table if not exists peoples ( id int primary key auto_increment, name varchar(40) null ) AUTO_INCREMENT = 13; AVG_ROW_LENGTH CHARACTER SET 可以指定这个表使用的默认字符集（因为也可以针对列单独设置字符集），如果表不指定或者设置成 default 的话则会使用库的默认字符集，如果数据库的也没有设置的，MySQL Server 的默认字符集是 utf8mb4。"><meta property="og:type" content="article"><meta property="og:url" content="https://ignoredpjy.github.io/posts/study/mysql%E5%BB%BA%E8%A1%A8%E9%80%89%E9%A1%B9/"><meta property="article:section" content="posts"><meta name=twitter:card content="summary"><meta name=twitter:title content><meta name=twitter:description content="全文摘抄自：https://huweicai.com/mysql-create-options/
这是一个很常见的 SQL 建表语句：
1 2 3 4 5 CREATE TABLE `people` ( `id` int NOT NULL AUTO_INCREMENT, `name` varchar(40) DEFAULT NULL, PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 SQL 建表语句结构如下：
1 2 3 CREATE [TEMPORARY] TABLE [IF NOT EXISTS] tbl_name (create_definition,...) [table_options] 我们对照结构可以看到我们的建表语句最后一部分是表选项，而在这里我们指定了两个选项：引擎和字符集，那么总共都有哪些选项可以设置呢？参照MySQL官方文档，我们一起来看看。
AUTO_INCREMENT MySQL 一张表中可以指定一个字段为 auto increment，这样在当这个字段没有指定值时就在当前表最大值的基础上自增，在插入了自增的一列后，可以通过：
1 select LAST_INSERT_ID(); 来获取 MySQL 自动生成的 ID。
在建表的时候，可以通过 AUTO_INCREMENT 指定自增开始的值：
1 2 3 4 create table if not exists peoples ( id int primary key auto_increment, name varchar(40) null ) AUTO_INCREMENT = 13; AVG_ROW_LENGTH CHARACTER SET 可以指定这个表使用的默认字符集（因为也可以针对列单独设置字符集），如果表不指定或者设置成 default 的话则会使用库的默认字符集，如果数据库的也没有设置的，MySQL Server 的默认字符集是 utf8mb4。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":" 文章","item":"https://ignoredpjy.github.io/posts/"},{"@type":"ListItem","position":3,"name":" 学习笔记","item":"https://ignoredpjy.github.io/posts/study/"},{"@type":"ListItem","position":4,"name":"","item":"https://ignoredpjy.github.io/posts/study/mysql%E5%BB%BA%E8%A1%A8%E9%80%89%E9%A1%B9/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"","name":"","description":"全文摘抄自：https://huweicai.com/mysql-create-options/\n这是一个很常见的 SQL 建表语句：\n1 2 3 4 5 CREATE TABLE `people` ( `id` int NOT NULL AUTO_INCREMENT, `name` varchar(40) DEFAULT NULL, PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 SQL 建表语句结构如下：\n1 2 3 CREATE [TEMPORARY] TABLE [IF NOT EXISTS] tbl_name (create_definition,...) [table_options] 我们对照结构可以看到我们的建表语句最后一部分是表选项，而在这里我们指定了两个选项：引擎和字符集，那么总共都有哪些选项可以设置呢？参照MySQL官方文档，我们一起来看看。\nAUTO_INCREMENT MySQL 一张表中可以指定一个字段为 auto increment，这样在当这个字段没有指定值时就在当前表最大值的基础上自增，在插入了自增的一列后，可以通过：\n1 select LAST_INSERT_ID(); 来获取 MySQL 自动生成的 ID。\n在建表的时候，可以通过 AUTO_INCREMENT 指定自增开始的值：\n1 2 3 4 create table if not exists peoples ( id int primary key auto_increment, name varchar(40) null ) AUTO_INCREMENT = 13; AVG_ROW_LENGTH CHARACTER SET 可以指定这个表使用的默认字符集（因为也可以针对列单独设置字符集），如果表不指定或者设置成 default 的话则会使用库的默认字符集，如果数据库的也没有设置的，MySQL Server 的默认字符集是 utf8mb4。","keywords":[],"articleBody":"全文摘抄自：https://huweicai.com/mysql-create-options/\n这是一个很常见的 SQL 建表语句：\n1 2 3 4 5 CREATE TABLE `people` ( `id` int NOT NULL AUTO_INCREMENT, `name` varchar(40) DEFAULT NULL, PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 SQL 建表语句结构如下：\n1 2 3 CREATE [TEMPORARY] TABLE [IF NOT EXISTS] tbl_name (create_definition,...) [table_options] 我们对照结构可以看到我们的建表语句最后一部分是表选项，而在这里我们指定了两个选项：引擎和字符集，那么总共都有哪些选项可以设置呢？参照MySQL官方文档，我们一起来看看。\nAUTO_INCREMENT MySQL 一张表中可以指定一个字段为 auto increment，这样在当这个字段没有指定值时就在当前表最大值的基础上自增，在插入了自增的一列后，可以通过：\n1 select LAST_INSERT_ID(); 来获取 MySQL 自动生成的 ID。\n在建表的时候，可以通过 AUTO_INCREMENT 指定自增开始的值：\n1 2 3 4 create table if not exists peoples ( id int primary key auto_increment, name varchar(40) null ) AUTO_INCREMENT = 13; AVG_ROW_LENGTH CHARACTER SET 可以指定这个表使用的默认字符集（因为也可以针对列单独设置字符集），如果表不指定或者设置成 default 的话则会使用库的默认字符集，如果数据库的也没有设置的，MySQL Server 的默认字符集是 utf8mb4。\nMySQL 目前支持的字符集，可以通过：SHOW CHARACTER SET 查看，我们可能用到的：ascii，gb2312，gbk，big5，utf16，utf8，utf8mb4 等字符编码集都是支持的。\n指定 people 表的字符集为 utf8mb4\n1 2 3 4 create table if not exists people ( id int primary key auto_increment, name varchar(40) null ) character set = 'utf8mb4'; 一个表的默认字符集指定之后也是可以修改的：\n1 ALTER TABLE people CONVERT TO CHARACTER SET 'utf8'; # 不需要emoji，从 utf8mb4 修改为 utf8 可以通过查看建表语句来查看一个表的字符集：\n1 2 3 4 5 6 7 8 SHOW CREATE TABLE people; 输出： CREATE TABLE `people` ( `id` int NOT NULL AUTO_INCREMENT, `name` varchar(40) DEFAULT NULL, PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 可以看到字符集已经修改成功了。\nCHECKSUM 1 表示需要 MySQL 为表维持一个校验和，以便于快速的发现数据受损，不过一定程度上会影响更新性能。\nCOLLATE 指定使用哪个字符排序规则，这个是由于不同的字符在不同的文化语义中可以会有不同的顺序，同时也交给用户更多的选择，比如要不要区分大小写。\n每个字符集都会有一个默认的排序规则，以 utfmb4 为例，通过 show collation where Chareset='utf8mb4' 可以看到 utf8mb4 有七十多个字符排序规则，而我们可以看到它默认的字符序是utf8mb4_0900_ai_ci：\n1 SHOW CHARACTER SET where Charset= 'utf8mb4'; 输出：\nCharset Description Default collation Maxlen utf8mb4 UTF-8 Unicode utf8mb4_0900_ai_ci 4 ai 表示 accent insensitive，口音无关，比如：e, è, é, ê 会被视为一样的；\nci 则代表 case insensitive，大小写无关，A 和 a 会被视为同样的字符，所以我们会看到非常神奇的一幕：\n执行：select 'A' = 'a','A'= 'A','A' = 'B';\n输出：\n'A' = 'a' 'A'= 'A' 'A' = 'B' 1 1 0 所以 select * from table where string=\"xxx\" 的时候就要注意了，默认是不区分大小写的，可以临时指定使用其他的字符序，或者根据业务场景判断是否需要在建表的时候就把表的字符序就设置为大小写敏感的字符序，比如：utf8mb4_0900_as_cs 等包含 _cs 的字符序：\n1 2 3 4 create table if not exists people ( id int primary key auto_increment, name varchar(40) null ) character set = 'utf8mb4' collate = 'utf8mb4_0900_as_cs'; COMMENT 加个注释，方便日后维护，写注释是个好习惯，有的公司的 SQL 工单平台甚至会强制必须有注释。\n1 2 3 4 create table if not exists people ( id int primary key auto_increment, name varchar(40) null ) comment '存储人物信息'; COMPRESSION 开启表压缩选项，只对 InnoDB 引擎有效，支持：Zlib 和 LZ4两种压缩算法，可以置成 None 关闭。\nCONNECTION FEDERATED 引擎可以远程连接到其他数据库映射到本地，可以通过这个字段来指定对应远程数据库的连接字符串。\n(DATA | INDEX) DIRECTORY InnoDB 引擎在建表的时候可以通过 DATA DIRECTORY 指定 .idb 文件的位置，这个特性在当前分区磁盘空间不足需要使用其他分区时会很有用。\n而 MyIsam 引擎不是聚簇的，它的数据和索引是分开的，所以不仅可以通过 DATA DIRECORY 指定生成的 .MYD 数据文件位置，还可以通过 INDEX DIRECOTRY 来指定生成的 .MYI索引文件。\n不过官网上特意申明了一个 bug，自己指定的文件目录不能包含 MySQL 文件目录，不然会报错：Incorrect arguments to DATA DIRECTORY。\nDELAY_KEY_WRITE 这个选项只对 MyISAM 生效，当 DELAY_KEY_WRITE置为1时，对MyISAM执行更新操作时，只更新磁盘中的数据，但是索引只更新内存，提升更新速度。如果 crash 之后也可以根据数据来修复索引。\nENCRYPTION ENCRYPTION='Y'代表开启表空间加密，’N’代表不开启，不过需要加载加密插件才可以。\nENGINE 这应该是被使用最多的选项了，为要创建的这个表单独指定存储引擎。支持的引擎如下：\n引擎 描述 InnoDB 支持事务、行锁、外键等高级特性，主键聚簇。具有良好的性能和可靠性。MySQL默认的存储引擎。 MyISAM 由ISAM（Indexed Sequential Access Metod）引擎改良，可移植性好，占用空间小，但是表级别的锁使得并发读写性能较差，适用于只有查询或者读多写少的场景，如：服务配置存储等。 Memory 又被叫做：Heap，数据存储在内存中，可靠性较低，一般用于临时表场景使用。另外 InnoDB 也支持内存缓存可以大量甚至全部数据载入内存，所以这个引擎使用场景越来越少了。 CSV 数据通过 CSV(Comma-Separated Values)的格式存储，可读性和可操作性非常好，但是由于数据未经过索引，性能很差，所以一般用于将其他表中的数据导过来用于与其他应用交互。 Archive 支持压缩，无索引，适用于存储大量冷门归档数据。 Blackhole 黑洞，不存储数据，查询也都会返回空。但这也并不代表这个引擎没有实际价值，它虽然不存储数据但是 binlog 还是会有，所以经常用于做为伪从库减轻主库压力或者记录binlog用。 NDB 全称Network DataBase，是一个分布式存储引擎。 Merge 可以用于将一系列 MyISM 抽象为一张表。 Federated 可以将其他远程数据的表映射到本地。 Example 主要是一个 demo，供开发人员学习如何开发一个存储引擎。 各引擎支持的功能特性对比：\nFeature MyISAM Memory InnoDB Archive NDB B树索引 Yes Yes Yes No No 备份/恢复 Yes Yes Yes Yes Yes 分布式集群支持 No No No No Yes 聚簇索引 No No Yes No No 数据压缩 Yes No Yes Yes No 数据缓存 No N/A Yes No Yes 数据加密 Yes Yes Yes Yes Yes 外键 No No Yes No Yes 全文搜索（倒排） Yes No Yes No No 地理空间数据 Yes No Yes Yes Yes 地理空间索引 Yes No Yes No No 散列索引 No Yes No No Yes 索引缓存 Yes N/A Yes No Yes 锁粒度 Table Table Row Row Row MVCC No No Yes No No 冗余存储 (note 1) Yes Limited Yes Yes Yes 存储限制 256TB RAM 64TB None 384EB T树索引 No No No No Yes 事务 No No Yes No Yes 更新数据字典的统计信息 Yes Yes Yes Yes Yes 注：关于存储限制虽然上限都很高，但是将数据都存储在一个文件的引擎会受操作系统的文件大小限制（TB级别）。\nExample，创建一个 MyISAM 的表：\n1 2 3 4 create table if not exists people ( id int primary key auto_increment, name varchar(40) null, ) comment '存储人物信息' engine='myisam; ENGINE_ATTRIBUTE 保留字段，以后用于透传信息到引擎层。\nINSERT_METHOD MERGE 存储引擎使用。\nKEY_BLOCK_SIZE\n指定压缩后的页大小，单位为 KB，不过MySQ不一定会按照设定的数字来运行。\nInnoDB的默认页大小为16KB，可以查看 innodb_page_size 变量：show variables like 'innodb_page_size';\n所以压缩后的大小有：1KB、2KB、4KB、8KB这几个选项。\nMAX_ROWS 最大的行数，这个是给MySQL的优化建议，告诉它至少要能存这么多数据。\nMIN_ROWS 同最大行数，也是一个建议，告诉MySQL我至少要存这么多行数据。\nPACK_KEYS MyISAM专用参数，压缩索引。\nPASSWORD 废弃了\nROW_FORMAT 行格式决定了数据在文件表空间中某一页的具体格式。\nInnoDB 有两种文件格式，早期为：Antelope，对应有两种行格式可选：Compact 和 Redundant，后面又新增了Barracuda格式，新增了 Compressed 和 Dynamic 两种格式。\n5.6及之前的版本默认的行格式都是 Compact，而 5.6 之后的 5.7 和 8.0 则设为了 Dynamic。\nRedundant 是早期的文件格式和早期MySQL版本兼容，在列的值小于 768 字节时会将数据直接存储在当前页中，超过才会存储至溢出页，这虽然能减少小字段的 IO，但是可能会导致 B+树节点太满，一个页中存不了多少行。\nCompact 相较于 Redundant 能减少 20% 的存储空间，对于溢出列的处理和 Redundant 一致。\nDynamic 对于可变长列的存储更加智能，会综合考虑整行的大小来决定要不要把列存储在溢出页。\nCompressed 会对数据使用 zlib 压缩，能进一步减少空间占用。\n各种格式的特性对比：\n行格式 紧凑存储 变长列完全溢出页存储 大索引支持 压缩 支持的表空间类型 REDUNDANT No No No No system, file-per-table, general COMPACT Yes No No No system, file-per-table, general DYNAMIC Yes Yes Yes No system, file-per-table, general COMPRESSED Yes Yes Yes Yes file-per-table, general SECONDARY_ENGINE_ATTRIBUTE 同 ENGINE_ATTRIBUTE。\nSTATS_AUTO_RECALC 是否自动重新计算 InnoDB 的表统计信息，设置为 1 会在表中数据变动超过 10% 触发，也可以关闭自动触发手动通过 ananyze table 触发。\n更准确的统计信息可以让执行计划优化的更好。\nSTATS_PERSISTENT 是否开启统计信息，默认开启。\nSTATS_SAMPLE_PAGES 统计信息的页面采样数量，更大准确，采样时间越久，默认 20 页。\nTABLESPACE 用于单独为这个表覆盖 INNODB_PER_FILE_TABLE ，可以让这个表单开一个表空间，或者所有表共用一个表空间。\nUNION Merge 存储引擎使用，用于将一系列 MyISAM 表联合成一个。\n","wordCount":"682","inLanguage":"zh","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","author":{"@type":"Person","name":"PJY"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://ignoredpjy.github.io/posts/study/mysql%E5%BB%BA%E8%A1%A8%E9%80%89%E9%A1%B9/"},"publisher":{"@type":"Organization","name":"PJY's Blog","logo":{"@type":"ImageObject","url":"https://ignoredpjy.github.io/img/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://ignoredpjy.github.io accesskey=h title="PJY's Blog (Alt + H)"><img src=https://ignoredpjy.github.io/img/man-removebg.png alt aria-label=logo height=40>PJY's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://ignoredpjy.github.io/posts/ title=📖文章><span>📖文章</span></a></li><li><a href=https://ignoredpjy.github.io/tags/ title=🏷️标签><span>🏷️标签</span></a></li><li><a href=https://ignoredpjy.github.io/search/ title=🔍搜索><span>🔍搜索</span></a></li><li><a href=https://ignoredpjy.github.io/archives/ title=📚归档><span>📚归档</span></a></li></ul></nav></header><main class=main><style>i[id*=post_meta_style]{display:flex;align-items:center;margin:0 0 10px}</style><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://ignoredpjy.github.io>🏠 主页</a>&nbsp;»&nbsp;<a href=https://ignoredpjy.github.io/posts/> 文章</a>&nbsp;»&nbsp;<a href=https://ignoredpjy.github.io/posts/study/> 学习笔记</a></div><h1 class=post-title></h1><div class=post-meta><style>i[id*=post_meta_style]{display:flex;align-items:center;margin:0 0 10px}.parent-post-meta{display:flex;flex-wrap:wrap;opacity:.8}</style><span class=parent-post-meta><span id=post_meta_style_1><span class="fa fa-calendar-check-o"></span>
<span>January 1, 0001
&nbsp;&nbsp;</span></span>
<span id=post_meta_style_3><span class="fa fa-file-word-o"></span>
<span>682字
&nbsp;&nbsp;</span></span>
<span id=post_meta_style_4><span class="fa fa-clock-o"></span>
<span>4分钟
&nbsp;&nbsp;</span></span>
<span id=post_meta_style_5><span class="fa fa-user-o"></span>
<span>PJY
&nbsp;&nbsp;</span></span>
<span id=post_meta_style_6><span class="fa fa-tags" style=opacity:.8></span>
<span></span></span></span><span style=opacity:.8><span id=post_meta_style_7>&nbsp;&nbsp;
<span class="fa fa-eye"></span>
<span><span id=busuanzi_container_page_pv><span id=busuanzi_value_page_pv></span></span>
&nbsp;&nbsp;</span></span></span></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><ul><li><a href=#auto_increment aria-label=AUTO_INCREMENT>AUTO_INCREMENT</a></li><li><a href=#avg_row_length aria-label=AVG_ROW_LENGTH>AVG_ROW_LENGTH</a></li><li><a href=#character-set aria-label="CHARACTER SET">CHARACTER SET</a></li><li><a href=#checksum aria-label=CHECKSUM>CHECKSUM</a></li><li><a href=#collate aria-label=COLLATE>COLLATE</a></li><li><a href=#comment aria-label=COMMENT>COMMENT</a></li><li><a href=#compression aria-label=COMPRESSION>COMPRESSION</a></li><li><a href=#connection aria-label=CONNECTION>CONNECTION</a></li><li><a href=#data--index-directory aria-label="(DATA | INDEX) DIRECTORY">(DATA | INDEX) DIRECTORY</a></li><li><a href=#delay_key_write aria-label=DELAY_KEY_WRITE>DELAY_KEY_WRITE</a></li><li><a href=#encryption aria-label=ENCRYPTION>ENCRYPTION</a></li><li><a href=#engine aria-label=ENGINE>ENGINE</a></li><li><a href=#engine_attribute aria-label=ENGINE_ATTRIBUTE>ENGINE_ATTRIBUTE</a></li><li><a href=#insert_method aria-label=INSERT_METHOD>INSERT_METHOD</a></li><li><a href=#max_rows aria-label=MAX_ROWS>MAX_ROWS</a></li><li><a href=#min_rows aria-label=MIN_ROWS>MIN_ROWS</a></li><li><a href=#pack_keys aria-label=PACK_KEYS>PACK_KEYS</a></li><li><a href=#password aria-label=PASSWORD>PASSWORD</a></li><li><a href=#row_format aria-label=ROW_FORMAT>ROW_FORMAT</a></li><li><a href=#secondary_engine_attribute aria-label=SECONDARY_ENGINE_ATTRIBUTE>SECONDARY_ENGINE_ATTRIBUTE</a></li><li><a href=#stats_auto_recalc aria-label=STATS_AUTO_RECALC>STATS_AUTO_RECALC</a></li><li><a href=#stats_persistent aria-label=STATS_PERSISTENT>STATS_PERSISTENT</a></li><li><a href=#stats_sample_pages aria-label=STATS_SAMPLE_PAGES>STATS_SAMPLE_PAGES</a></li><li><a href=#tablespace aria-label=TABLESPACE>TABLESPACE</a></li><li><a href=#union aria-label=UNION>UNION</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{elements&&(activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")}))},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><p>全文摘抄自：https://huweicai.com/mysql-create-options/</p><p>这是一个很常见的 SQL 建表语句：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2>2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3>3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4>4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=o>`</span><span class=n>people</span><span class=o>`</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>`</span><span class=n>id</span><span class=o>`</span><span class=w> </span><span class=nb>int</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=n>AUTO_INCREMENT</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>40</span><span class=p>)</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=o>`</span><span class=n>id</span><span class=o>`</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>)</span><span class=w> </span><span class=n>ENGINE</span><span class=o>=</span><span class=n>InnoDB</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=n>CHARSET</span><span class=o>=</span><span class=n>utf8</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>SQL 建表语句结构如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1>1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2>2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>CREATE</span><span class=w> </span><span class=p>[</span><span class=k>TEMPORARY</span><span class=p>]</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=p>[</span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=p>]</span><span class=w> </span><span class=n>tbl_name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>(</span><span class=n>create_definition</span><span class=p>,...)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>[</span><span class=n>table_options</span><span class=p>]</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>我们对照结构可以看到我们的建表语句最后一部分是表选项，而在这里我们指定了两个选项：引擎和字符集，那么总共都有哪些选项可以设置呢？参照<a href=https://dev.mysql.com/doc/refman/8.0/en/create-table.html>MySQL官方文档</a>，我们一起来看看。</p><h4 id=auto_increment>AUTO_INCREMENT<a hidden class=anchor aria-hidden=true href=#auto_increment>#</a></h4><p>MySQL 一张表中可以指定一个字段为 auto increment，这样在当这个字段没有指定值时就在当前表最大值的基础上自增，在插入了自增的一列后，可以通过：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>select</span><span class=w> </span><span class=n>LAST_INSERT_ID</span><span class=p>();</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>来获取 MySQL 自动生成的 ID。</p><p>在建表的时候，可以通过 AUTO_INCREMENT 指定自增开始的值：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1>1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2>2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3>3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>create</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>exists</span><span class=w> </span><span class=n>peoples</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>id</span><span class=w> </span><span class=nb>int</span><span class=w> </span><span class=k>primary</span><span class=w> </span><span class=k>key</span><span class=w> </span><span class=n>auto_increment</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>name</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>40</span><span class=p>)</span><span class=w> </span><span class=k>null</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>)</span><span class=w> </span><span class=n>AUTO_INCREMENT</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>13</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=avg_row_length>AVG_ROW_LENGTH<a hidden class=anchor aria-hidden=true href=#avg_row_length>#</a></h4><h4 id=character-set>CHARACTER SET<a hidden class=anchor aria-hidden=true href=#character-set>#</a></h4><p>可以指定这个表使用的默认字符集（因为也可以针对列单独设置字符集），如果表不指定或者设置成 default 的话则会使用库的默认字符集，如果数据库的也没有设置的，MySQL Server 的默认字符集是 utf8mb4。</p><p>MySQL 目前支持的字符集，可以通过：<code>SHOW CHARACTER SET</code> 查看，我们可能用到的：<code>ascii，gb2312，gbk，big5，utf16，utf8，utf8mb4</code> 等字符编码集都是支持的。</p><p>指定 people 表的字符集为 utf8mb4</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1>1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2>2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3>3</a>
</span><span class=lnt id=hl-4-4><a class=lnlinks href=#hl-4-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>create table if not exists people (
</span></span><span class=line><span class=cl>    id int primary key auto_increment,
</span></span><span class=line><span class=cl>    name varchar(40) null
</span></span><span class=line><span class=cl>) character set = &#39;utf8mb4&#39;;
</span></span></code></pre></td></tr></table></div></div><p>一个表的默认字符集指定之后也是可以修改的：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>ALTER TABLE people CONVERT TO CHARACTER SET &#39;utf8&#39;; # 不需要emoji，从 utf8mb4 修改为 utf8
</span></span></code></pre></td></tr></table></div></div><p>可以通过查看建表语句来查看一个表的字符集：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1>1</a>
</span><span class=lnt id=hl-6-2><a class=lnlinks href=#hl-6-2>2</a>
</span><span class=lnt id=hl-6-3><a class=lnlinks href=#hl-6-3>3</a>
</span><span class=lnt id=hl-6-4><a class=lnlinks href=#hl-6-4>4</a>
</span><span class=lnt id=hl-6-5><a class=lnlinks href=#hl-6-5>5</a>
</span><span class=lnt id=hl-6-6><a class=lnlinks href=#hl-6-6>6</a>
</span><span class=lnt id=hl-6-7><a class=lnlinks href=#hl-6-7>7</a>
</span><span class=lnt id=hl-6-8><a class=lnlinks href=#hl-6-8>8</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-mysql data-lang=mysql><span class=line><span class=cl><span class=k>SHOW</span><span class=w> </span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>people</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>输出：</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=o>`</span><span class=n>people</span><span class=o>`</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>`</span><span class=n>id</span><span class=o>`</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=no>NULL</span><span class=w> </span><span class=kp>AUTO_INCREMENT</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=w> </span><span class=kt>varchar</span><span class=p>(</span><span class=mi>40</span><span class=p>)</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=no>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=o>`</span><span class=n>id</span><span class=o>`</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>)</span><span class=w> </span><span class=kp>ENGINE</span><span class=o>=</span><span class=n>InnoDB</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=kp>CHARSET</span><span class=o>=</span><span class=n>utf8</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>可以看到字符集已经修改成功了。</p><h4 id=checksum>CHECKSUM<a hidden class=anchor aria-hidden=true href=#checksum>#</a></h4><p>1 表示需要 MySQL 为表维持一个校验和，以便于快速的发现数据受损，不过一定程度上会影响更新性能。</p><h4 id=collate>COLLATE<a hidden class=anchor aria-hidden=true href=#collate>#</a></h4><p>指定使用哪个字符排序规则，这个是由于不同的字符在不同的文化语义中可以会有不同的顺序，同时也交给用户更多的选择，比如要不要区分大小写。</p><p>每个字符集都会有一个默认的排序规则，以 utfmb4 为例，通过 <code>show collation where Chareset='utf8mb4'</code> 可以看到 utf8mb4 有七十多个字符排序规则，而我们可以看到它默认的字符序是<code>utf8mb4_0900_ai_ci</code>：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>SHOW CHARACTER SET where Charset= &#39;utf8mb4&#39;;
</span></span></code></pre></td></tr></table></div></div><p>输出：</p><table><thead><tr><th style=text-align:center>Charset</th><th style=text-align:center>Description</th><th style=text-align:center>Default collation</th><th style=text-align:center>Maxlen</th></tr></thead><tbody><tr><td style=text-align:center>utf8mb4</td><td style=text-align:center>UTF-8 Unicode</td><td style=text-align:center>utf8mb4_0900_ai_ci</td><td style=text-align:center>4</td></tr></tbody></table><p>ai 表示 accent insensitive，口音无关，比如：e, è, é, ê 会被视为一样的；</p><p>ci 则代表 case insensitive，大小写无关，A 和 a 会被视为同样的字符，所以我们会看到非常神奇的一幕：</p><p>执行：<code>select 'A' = 'a','A'= 'A','A' = 'B'</code>;</p><p>输出：</p><table><thead><tr><th style=text-align:center><code>'A' = 'a'</code></th><th style=text-align:center><code>'A'= 'A'</code></th><th style=text-align:center><code>'A' = 'B'</code></th></tr></thead><tbody><tr><td style=text-align:center>1</td><td style=text-align:center>1</td><td style=text-align:center>0</td></tr></tbody></table><p>所以 <code>select * from table where string="xxx"</code> 的时候就要注意了，默认是不区分大小写的，可以临时指定使用其他的字符序，或者根据业务场景判断是否需要在建表的时候就把表的字符序就设置为大小写敏感的字符序，比如：<code>utf8mb4_0900_as_cs</code> 等包含 _cs 的字符序：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1>1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2>2</a>
</span><span class=lnt id=hl-8-3><a class=lnlinks href=#hl-8-3>3</a>
</span><span class=lnt id=hl-8-4><a class=lnlinks href=#hl-8-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>create</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>exists</span><span class=w> </span><span class=n>people</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>id</span><span class=w> </span><span class=nb>int</span><span class=w> </span><span class=k>primary</span><span class=w> </span><span class=k>key</span><span class=w> </span><span class=n>auto_increment</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>name</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>40</span><span class=p>)</span><span class=w> </span><span class=k>null</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>)</span><span class=w> </span><span class=nb>character</span><span class=w> </span><span class=k>set</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;utf8mb4&#39;</span><span class=w> </span><span class=k>collate</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;utf8mb4_0900_as_cs&#39;</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=comment>COMMENT<a hidden class=anchor aria-hidden=true href=#comment>#</a></h4><p>加个注释，方便日后维护，写注释是个好习惯，有的公司的 SQL 工单平台甚至会强制必须有注释。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-9-1><a class=lnlinks href=#hl-9-1>1</a>
</span><span class=lnt id=hl-9-2><a class=lnlinks href=#hl-9-2>2</a>
</span><span class=lnt id=hl-9-3><a class=lnlinks href=#hl-9-3>3</a>
</span><span class=lnt id=hl-9-4><a class=lnlinks href=#hl-9-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>create</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>exists</span><span class=w> </span><span class=n>people</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>id</span><span class=w> </span><span class=nb>int</span><span class=w> </span><span class=k>primary</span><span class=w> </span><span class=k>key</span><span class=w> </span><span class=n>auto_increment</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>name</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>40</span><span class=p>)</span><span class=w> </span><span class=k>null</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>)</span><span class=w> </span><span class=k>comment</span><span class=w> </span><span class=s1>&#39;存储人物信息&#39;</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=compression>COMPRESSION<a hidden class=anchor aria-hidden=true href=#compression>#</a></h4><p>开启表压缩选项，只对 InnoDB 引擎有效，支持：Zlib 和 LZ4两种压缩算法，可以置成 None 关闭。</p><h4 id=connection>CONNECTION<a hidden class=anchor aria-hidden=true href=#connection>#</a></h4><p>FEDERATED 引擎可以远程连接到其他数据库映射到本地，可以通过这个字段来指定对应远程数据库的连接字符串。</p><h4 id=data--index-directory>(DATA | INDEX) DIRECTORY<a hidden class=anchor aria-hidden=true href=#data--index-directory>#</a></h4><p>InnoDB 引擎在建表的时候可以通过 DATA DIRECTORY 指定 .idb 文件的位置，这个特性在当前分区磁盘空间不足需要使用其他分区时会很有用。</p><p>而 MyIsam 引擎不是聚簇的，它的数据和索引是分开的，所以不仅可以通过 DATA DIRECORY 指定生成的 .MYD 数据文件位置，还可以通过 INDEX DIRECOTRY 来指定生成的 .MYI索引文件。</p><p>不过官网上特意申明了一个 bug，自己指定的文件目录不能包含 MySQL 文件目录，不然会报错：<code>Incorrect arguments to DATA DIRECTORY</code>。</p><h4 id=delay_key_write>DELAY_KEY_WRITE<a hidden class=anchor aria-hidden=true href=#delay_key_write>#</a></h4><p>这个选项只对 MyISAM 生效，当 DELAY_KEY_WRITE置为1时，对MyISAM执行更新操作时，只更新磁盘中的数据，但是索引只更新内存，提升更新速度。如果 crash 之后也可以根据数据来修复索引。</p><h4 id=encryption>ENCRYPTION<a hidden class=anchor aria-hidden=true href=#encryption>#</a></h4><p><code>ENCRYPTION='Y'</code>代表开启表空间加密，’N’代表不开启，不过需要加载加密插件才可以。</p><h4 id=engine>ENGINE<a hidden class=anchor aria-hidden=true href=#engine>#</a></h4><p>这应该是被使用最多的选项了，为要创建的这个表单独指定存储引擎。支持的引擎如下：</p><table><thead><tr><th style=text-align:center>引擎</th><th style=text-align:center>描述</th></tr></thead><tbody><tr><td style=text-align:center>InnoDB</td><td style=text-align:center>支持事务、行锁、外键等高级特性，主键聚簇。具有良好的性能和可靠性。MySQL默认的存储引擎。</td></tr><tr><td style=text-align:center>MyISAM</td><td style=text-align:center>由ISAM（Indexed Sequential Access Metod）引擎改良，可移植性好，占用空间小，但是表级别的锁使得并发读写性能较差，适用于只有查询或者读多写少的场景，如：服务配置存储等。</td></tr><tr><td style=text-align:center>Memory</td><td style=text-align:center>又被叫做：Heap，数据存储在内存中，可靠性较低，一般用于临时表场景使用。另外 InnoDB 也支持内存缓存可以大量甚至全部数据载入内存，所以这个引擎使用场景越来越少了。</td></tr><tr><td style=text-align:center>CSV</td><td style=text-align:center>数据通过 CSV(Comma-Separated Values)的格式存储，可读性和可操作性非常好，但是由于数据未经过索引，性能很差，所以一般用于将其他表中的数据导过来用于与其他应用交互。</td></tr><tr><td style=text-align:center>Archive</td><td style=text-align:center>支持压缩，无索引，适用于存储大量冷门归档数据。</td></tr><tr><td style=text-align:center>Blackhole</td><td style=text-align:center>黑洞，不存储数据，查询也都会返回空。但这也并不代表这个引擎没有实际价值，它虽然不存储数据但是 binlog 还是会有，所以经常用于做为伪从库减轻主库压力或者记录binlog用。</td></tr><tr><td style=text-align:center>NDB</td><td style=text-align:center>全称Network DataBase，是一个分布式存储引擎。</td></tr><tr><td style=text-align:center>Merge</td><td style=text-align:center>可以用于将一系列 MyISM 抽象为一张表。</td></tr><tr><td style=text-align:center>Federated</td><td style=text-align:center>可以将其他远程数据的表映射到本地。</td></tr><tr><td style=text-align:center>Example</td><td style=text-align:center>主要是一个 demo，供开发人员学习如何开发一个存储引擎。</td></tr></tbody></table><p>各引擎支持的功能特性对比：</p><table><thead><tr><th style=text-align:center>Feature</th><th style=text-align:center>MyISAM</th><th style=text-align:center>Memory</th><th style=text-align:center>InnoDB</th><th style=text-align:center>Archive</th><th style=text-align:center>NDB</th></tr></thead><tbody><tr><td style=text-align:center><strong>B树索引</strong></td><td style=text-align:center>Yes</td><td style=text-align:center>Yes</td><td style=text-align:center>Yes</td><td style=text-align:center>No</td><td style=text-align:center>No</td></tr><tr><td style=text-align:center><strong>备份/恢复</strong></td><td style=text-align:center>Yes</td><td style=text-align:center>Yes</td><td style=text-align:center>Yes</td><td style=text-align:center>Yes</td><td style=text-align:center>Yes</td></tr><tr><td style=text-align:center><strong>分布式集群支持</strong></td><td style=text-align:center>No</td><td style=text-align:center>No</td><td style=text-align:center>No</td><td style=text-align:center>No</td><td style=text-align:center>Yes</td></tr><tr><td style=text-align:center><strong>聚簇索引</strong></td><td style=text-align:center>No</td><td style=text-align:center>No</td><td style=text-align:center>Yes</td><td style=text-align:center>No</td><td style=text-align:center>No</td></tr><tr><td style=text-align:center><strong>数据压缩</strong></td><td style=text-align:center>Yes</td><td style=text-align:center>No</td><td style=text-align:center>Yes</td><td style=text-align:center>Yes</td><td style=text-align:center>No</td></tr><tr><td style=text-align:center><strong>数据缓存</strong></td><td style=text-align:center>No</td><td style=text-align:center>N/A</td><td style=text-align:center>Yes</td><td style=text-align:center>No</td><td style=text-align:center>Yes</td></tr><tr><td style=text-align:center><strong>数据加密</strong></td><td style=text-align:center>Yes</td><td style=text-align:center>Yes</td><td style=text-align:center>Yes</td><td style=text-align:center>Yes</td><td style=text-align:center>Yes</td></tr><tr><td style=text-align:center><strong>外键</strong></td><td style=text-align:center>No</td><td style=text-align:center>No</td><td style=text-align:center>Yes</td><td style=text-align:center>No</td><td style=text-align:center>Yes</td></tr><tr><td style=text-align:center><strong>全文搜索（倒排）</strong></td><td style=text-align:center>Yes</td><td style=text-align:center>No</td><td style=text-align:center>Yes</td><td style=text-align:center>No</td><td style=text-align:center>No</td></tr><tr><td style=text-align:center><strong>地理空间数据</strong></td><td style=text-align:center>Yes</td><td style=text-align:center>No</td><td style=text-align:center>Yes</td><td style=text-align:center>Yes</td><td style=text-align:center>Yes</td></tr><tr><td style=text-align:center><strong>地理空间索引</strong></td><td style=text-align:center>Yes</td><td style=text-align:center>No</td><td style=text-align:center>Yes</td><td style=text-align:center>No</td><td style=text-align:center>No</td></tr><tr><td style=text-align:center><strong>散列索引</strong></td><td style=text-align:center>No</td><td style=text-align:center>Yes</td><td style=text-align:center>No</td><td style=text-align:center>No</td><td style=text-align:center>Yes</td></tr><tr><td style=text-align:center><strong>索引缓存</strong></td><td style=text-align:center>Yes</td><td style=text-align:center>N/A</td><td style=text-align:center>Yes</td><td style=text-align:center>No</td><td style=text-align:center>Yes</td></tr><tr><td style=text-align:center><strong>锁粒度</strong></td><td style=text-align:center>Table</td><td style=text-align:center>Table</td><td style=text-align:center>Row</td><td style=text-align:center>Row</td><td style=text-align:center>Row</td></tr><tr><td style=text-align:center><strong>MVCC</strong></td><td style=text-align:center>No</td><td style=text-align:center>No</td><td style=text-align:center>Yes</td><td style=text-align:center>No</td><td style=text-align:center>No</td></tr><tr><td style=text-align:center><strong>冗余存储</strong> (note 1)</td><td style=text-align:center>Yes</td><td style=text-align:center>Limited</td><td style=text-align:center>Yes</td><td style=text-align:center>Yes</td><td style=text-align:center>Yes</td></tr><tr><td style=text-align:center><strong>存储限制</strong></td><td style=text-align:center>256TB</td><td style=text-align:center>RAM</td><td style=text-align:center>64TB</td><td style=text-align:center>None</td><td style=text-align:center>384EB</td></tr><tr><td style=text-align:center><strong>T树索引</strong></td><td style=text-align:center>No</td><td style=text-align:center>No</td><td style=text-align:center>No</td><td style=text-align:center>No</td><td style=text-align:center>Yes</td></tr><tr><td style=text-align:center><strong>事务</strong></td><td style=text-align:center>No</td><td style=text-align:center>No</td><td style=text-align:center>Yes</td><td style=text-align:center>No</td><td style=text-align:center>Yes</td></tr><tr><td style=text-align:center><strong>更新数据字典的统计信息</strong></td><td style=text-align:center>Yes</td><td style=text-align:center>Yes</td><td style=text-align:center>Yes</td><td style=text-align:center>Yes</td><td style=text-align:center>Yes</td></tr></tbody></table><p>注：关于存储限制虽然上限都很高，但是将数据都存储在一个文件的引擎会受操作系统的文件大小限制（TB级别）。</p><p>Example，创建一个 MyISAM 的表：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-10-1><a class=lnlinks href=#hl-10-1>1</a>
</span><span class=lnt id=hl-10-2><a class=lnlinks href=#hl-10-2>2</a>
</span><span class=lnt id=hl-10-3><a class=lnlinks href=#hl-10-3>3</a>
</span><span class=lnt id=hl-10-4><a class=lnlinks href=#hl-10-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>create</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>exists</span><span class=w> </span><span class=n>people</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>id</span><span class=w> </span><span class=nb>int</span><span class=w> </span><span class=k>primary</span><span class=w> </span><span class=k>key</span><span class=w> </span><span class=n>auto_increment</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>name</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>40</span><span class=p>)</span><span class=w> </span><span class=k>null</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>)</span><span class=w> </span><span class=k>comment</span><span class=w> </span><span class=s1>&#39;存储人物信息&#39;</span><span class=w> </span><span class=n>engine</span><span class=o>=</span><span class=s1>&#39;myisam;
</span></span></span></code></pre></td></tr></table></div></div><h4 id=engine_attribute>ENGINE_ATTRIBUTE<a hidden class=anchor aria-hidden=true href=#engine_attribute>#</a></h4><p>保留字段，以后用于透传信息到引擎层。</p><h4 id=insert_method>INSERT_METHOD<a hidden class=anchor aria-hidden=true href=#insert_method>#</a></h4><p>MERGE 存储引擎使用。</p><p><strong>KEY_BLOCK_SIZE</strong></p><p>指定压缩后的页大小，单位为 KB，不过MySQ不一定会按照设定的数字来运行。</p><p>InnoDB的默认页大小为16KB，可以查看 innodb_page_size 变量：<code>show variables like 'innodb_page_size';</code></p><p>所以压缩后的大小有：1KB、2KB、4KB、8KB这几个选项。</p><h4 id=max_rows>MAX_ROWS<a hidden class=anchor aria-hidden=true href=#max_rows>#</a></h4><p>最大的行数，这个是给MySQL的优化建议，告诉它至少要能存这么多数据。</p><h4 id=min_rows>MIN_ROWS<a hidden class=anchor aria-hidden=true href=#min_rows>#</a></h4><p>同最大行数，也是一个建议，告诉MySQL我至少要存这么多行数据。</p><h4 id=pack_keys>PACK_KEYS<a hidden class=anchor aria-hidden=true href=#pack_keys>#</a></h4><p>MyISAM专用参数，压缩索引。</p><h4 id=password>PASSWORD<a hidden class=anchor aria-hidden=true href=#password>#</a></h4><p>废弃了</p><h4 id=row_format>ROW_FORMAT<a hidden class=anchor aria-hidden=true href=#row_format>#</a></h4><p>行格式决定了数据在文件表空间中某一页的具体格式。</p><p>InnoDB 有两种文件格式，早期为：Antelope，对应有两种行格式可选：Compact 和 Redundant，后面又新增了Barracuda格式，新增了 Compressed 和 Dynamic 两种格式。</p><p>5.6及之前的版本默认的行格式都是 Compact，而 5.6 之后的 5.7 和 8.0 则设为了 Dynamic。</p><p>Redundant 是早期的文件格式和早期MySQL版本兼容，在列的值小于 768 字节时会将数据直接存储在当前页中，超过才会存储至溢出页，这虽然能减少小字段的 IO，但是可能会导致 B+树节点太满，一个页中存不了多少行。</p><p>Compact 相较于 Redundant 能减少 20% 的存储空间，对于溢出列的处理和 Redundant 一致。</p><p>Dynamic 对于可变长列的存储更加智能，会综合考虑整行的大小来决定要不要把列存储在溢出页。</p><p>Compressed 会对数据使用 zlib 压缩，能进一步减少空间占用。</p><p>各种格式的特性对比：</p><table><thead><tr><th style=text-align:center>行格式</th><th style=text-align:center>紧凑存储</th><th style=text-align:center>变长列完全溢出页存储</th><th style=text-align:center>大索引支持</th><th style=text-align:center>压缩</th><th style=text-align:center>支持的表空间类型</th></tr></thead><tbody><tr><td style=text-align:center><code>REDUNDANT</code></td><td style=text-align:center>No</td><td style=text-align:center>No</td><td style=text-align:center>No</td><td style=text-align:center>No</td><td style=text-align:center>system, file-per-table, general</td></tr><tr><td style=text-align:center><code>COMPACT</code></td><td style=text-align:center>Yes</td><td style=text-align:center>No</td><td style=text-align:center>No</td><td style=text-align:center>No</td><td style=text-align:center>system, file-per-table, general</td></tr><tr><td style=text-align:center><code>DYNAMIC</code></td><td style=text-align:center>Yes</td><td style=text-align:center>Yes</td><td style=text-align:center>Yes</td><td style=text-align:center>No</td><td style=text-align:center>system, file-per-table, general</td></tr><tr><td style=text-align:center><code>COMPRESSED</code></td><td style=text-align:center>Yes</td><td style=text-align:center>Yes</td><td style=text-align:center>Yes</td><td style=text-align:center>Yes</td><td style=text-align:center>file-per-table, general</td></tr></tbody></table><h4 id=secondary_engine_attribute>SECONDARY_ENGINE_ATTRIBUTE<a hidden class=anchor aria-hidden=true href=#secondary_engine_attribute>#</a></h4><p>同 ENGINE_ATTRIBUTE。</p><h4 id=stats_auto_recalc>STATS_AUTO_RECALC<a hidden class=anchor aria-hidden=true href=#stats_auto_recalc>#</a></h4><p>是否自动重新计算 InnoDB 的表统计信息，设置为 1 会在表中数据变动超过 10% 触发，也可以关闭自动触发手动通过 ananyze table 触发。</p><p>更准确的统计信息可以让执行计划优化的更好。</p><h4 id=stats_persistent>STATS_PERSISTENT<a hidden class=anchor aria-hidden=true href=#stats_persistent>#</a></h4><p>是否开启统计信息，默认开启。</p><h4 id=stats_sample_pages>STATS_SAMPLE_PAGES<a hidden class=anchor aria-hidden=true href=#stats_sample_pages>#</a></h4><p>统计信息的页面采样数量，更大准确，采样时间越久，默认 20 页。</p><h4 id=tablespace>TABLESPACE<a hidden class=anchor aria-hidden=true href=#tablespace>#</a></h4><p>用于单独为这个表覆盖 INNODB_PER_FILE_TABLE ，可以让这个表单开一个表空间，或者所有表共用一个表空间。</p><h4 id=union>UNION<a hidden class=anchor aria-hidden=true href=#union>#</a></h4><p>Merge 存储引擎使用，用于将一系列 MyISAM 表联合成一个。</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://ignoredpjy.github.io/posts/study/mysql%E5%B0%8F%E7%99%BD%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B/><span class=title>« 上一页</span><br><span></span></a>
<a class=next href=https://ignoredpjy.github.io/posts/study/netty%E5%8E%9F%E7%90%86/><span class=title>下一页 »</span><br><span></span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share  on twitter" href="https://twitter.com/intent/tweet/?text=&amp;url=https%3a%2f%2fignoredpjy.github.io%2fposts%2fstudy%2fmysql%25E5%25BB%25BA%25E8%25A1%25A8%25E9%2580%2589%25E9%25A1%25B9%2f&amp;hashtags="><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share  on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fignoredpjy.github.io%2fposts%2fstudy%2fmysql%25E5%25BB%25BA%25E8%25A1%25A8%25E9%2580%2589%25E9%25A1%25B9%2f&amp;title=&amp;summary=&amp;source=https%3a%2f%2fignoredpjy.github.io%2fposts%2fstudy%2fmysql%25E5%25BB%25BA%25E8%25A1%25A8%25E9%2580%2589%25E9%25A1%25B9%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share  on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fignoredpjy.github.io%2fposts%2fstudy%2fmysql%25E5%25BB%25BA%25E8%25A1%25A8%25E9%2580%2589%25E9%25A1%25B9%2f&title="><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share  on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fignoredpjy.github.io%2fposts%2fstudy%2fmysql%25E5%25BB%25BA%25E8%25A1%25A8%25E9%2580%2589%25E9%25A1%25B9%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share  on whatsapp" href="https://api.whatsapp.com/send?text=%20-%20https%3a%2f%2fignoredpjy.github.io%2fposts%2fstudy%2fmysql%25E5%25BB%25BA%25E8%25A1%25A8%25E9%2580%2589%25E9%25A1%25B9%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share  on telegram" href="https://telegram.me/share/url?text=&amp;url=https%3a%2f%2fignoredpjy.github.io%2fposts%2fstudy%2fmysql%25E5%25BB%25BA%25E8%25A1%25A8%25E9%2580%2589%25E9%25A1%25B9%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>Build by pjy</span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="复制";function s(){t.innerHTML="已复制！",setTimeout(()=>{t.innerHTML="复制"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>